{"version":3,"file":"gpxmap.js","sources":["../node_modules/pbf/index.js","../node_modules/point-geometry/index.js","../node_modules/vector-tile/lib/vectortilefeature.js","../node_modules/vector-tile/lib/vectortilelayer.js","../node_modules/vector-tile/lib/vectortile.js","../js/summary.js","../js/gpxmap.js","../Leaflet.VectorGrid/src/Leaflet.Renderer.SVG.Tile.js","../Leaflet.VectorGrid/src/Leaflet.VectorGrid.js","../node_modules/ieee754/index.js","../node_modules/vector-tile/index.js","../Leaflet.VectorGrid/src/Leaflet.VectorGrid.Protobuf.js","../Leaflet.VectorGrid/src/Leaflet.Renderer.Canvas.Tile.js","../js/util.js"],"sourcesContent":["'use strict';\n\nmodule.exports = Pbf;\n\nvar ieee754 = require('ieee754');\n\nfunction Pbf(buf) {\n    this.buf = ArrayBuffer.isView && ArrayBuffer.isView(buf) ? buf : new Uint8Array(buf || 0);\n    this.pos = 0;\n    this.type = 0;\n    this.length = this.buf.length;\n}\n\nPbf.Varint  = 0; // varint: int32, int64, uint32, uint64, sint32, sint64, bool, enum\nPbf.Fixed64 = 1; // 64-bit: double, fixed64, sfixed64\nPbf.Bytes   = 2; // length-delimited: string, bytes, embedded messages, packed repeated fields\nPbf.Fixed32 = 5; // 32-bit: float, fixed32, sfixed32\n\nvar SHIFT_LEFT_32 = (1 << 16) * (1 << 16),\n    SHIFT_RIGHT_32 = 1 / SHIFT_LEFT_32;\n\nPbf.prototype = {\n\n    destroy: function() {\n        this.buf = null;\n    },\n\n    // === READING =================================================================\n\n    readFields: function(readField, result, end) {\n        end = end || this.length;\n\n        while (this.pos < end) {\n            var val = this.readVarint(),\n                tag = val >> 3,\n                startPos = this.pos;\n\n            this.type = val & 0x7;\n            readField(tag, result, this);\n\n            if (this.pos === startPos) this.skip(val);\n        }\n        return result;\n    },\n\n    readMessage: function(readField, result) {\n        return this.readFields(readField, result, this.readVarint() + this.pos);\n    },\n\n    readFixed32: function() {\n        var val = readUInt32(this.buf, this.pos);\n        this.pos += 4;\n        return val;\n    },\n\n    readSFixed32: function() {\n        var val = readInt32(this.buf, this.pos);\n        this.pos += 4;\n        return val;\n    },\n\n    // 64-bit int handling is based on github.com/dpw/node-buffer-more-ints (MIT-licensed)\n\n    readFixed64: function() {\n        var val = readUInt32(this.buf, this.pos) + readUInt32(this.buf, this.pos + 4) * SHIFT_LEFT_32;\n        this.pos += 8;\n        return val;\n    },\n\n    readSFixed64: function() {\n        var val = readUInt32(this.buf, this.pos) + readInt32(this.buf, this.pos + 4) * SHIFT_LEFT_32;\n        this.pos += 8;\n        return val;\n    },\n\n    readFloat: function() {\n        var val = ieee754.read(this.buf, this.pos, true, 23, 4);\n        this.pos += 4;\n        return val;\n    },\n\n    readDouble: function() {\n        var val = ieee754.read(this.buf, this.pos, true, 52, 8);\n        this.pos += 8;\n        return val;\n    },\n\n    readVarint: function(isSigned) {\n        var buf = this.buf,\n            val, b;\n\n        b = buf[this.pos++]; val  =  b & 0x7f;        if (b < 0x80) return val;\n        b = buf[this.pos++]; val |= (b & 0x7f) << 7;  if (b < 0x80) return val;\n        b = buf[this.pos++]; val |= (b & 0x7f) << 14; if (b < 0x80) return val;\n        b = buf[this.pos++]; val |= (b & 0x7f) << 21; if (b < 0x80) return val;\n        b = buf[this.pos];   val |= (b & 0x0f) << 28;\n\n        return readVarintRemainder(val, isSigned, this);\n    },\n\n    readVarint64: function() { // for compatibility with v2.0.1\n        return this.readVarint(true);\n    },\n\n    readSVarint: function() {\n        var num = this.readVarint();\n        return num % 2 === 1 ? (num + 1) / -2 : num / 2; // zigzag encoding\n    },\n\n    readBoolean: function() {\n        return Boolean(this.readVarint());\n    },\n\n    readString: function() {\n        var end = this.readVarint() + this.pos,\n            str = readUtf8(this.buf, this.pos, end);\n        this.pos = end;\n        return str;\n    },\n\n    readBytes: function() {\n        var end = this.readVarint() + this.pos,\n            buffer = this.buf.subarray(this.pos, end);\n        this.pos = end;\n        return buffer;\n    },\n\n    // verbose for performance reasons; doesn't affect gzipped size\n\n    readPackedVarint: function(arr, isSigned) {\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readVarint(isSigned));\n        return arr;\n    },\n    readPackedSVarint: function(arr) {\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readSVarint());\n        return arr;\n    },\n    readPackedBoolean: function(arr) {\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readBoolean());\n        return arr;\n    },\n    readPackedFloat: function(arr) {\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readFloat());\n        return arr;\n    },\n    readPackedDouble: function(arr) {\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readDouble());\n        return arr;\n    },\n    readPackedFixed32: function(arr) {\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readFixed32());\n        return arr;\n    },\n    readPackedSFixed32: function(arr) {\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readSFixed32());\n        return arr;\n    },\n    readPackedFixed64: function(arr) {\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readFixed64());\n        return arr;\n    },\n    readPackedSFixed64: function(arr) {\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readSFixed64());\n        return arr;\n    },\n\n    skip: function(val) {\n        var type = val & 0x7;\n        if (type === Pbf.Varint) while (this.buf[this.pos++] > 0x7f) {}\n        else if (type === Pbf.Bytes) this.pos = this.readVarint() + this.pos;\n        else if (type === Pbf.Fixed32) this.pos += 4;\n        else if (type === Pbf.Fixed64) this.pos += 8;\n        else throw new Error('Unimplemented type: ' + type);\n    },\n\n    // === WRITING =================================================================\n\n    writeTag: function(tag, type) {\n        this.writeVarint((tag << 3) | type);\n    },\n\n    realloc: function(min) {\n        var length = this.length || 16;\n\n        while (length < this.pos + min) length *= 2;\n\n        if (length !== this.length) {\n            var buf = new Uint8Array(length);\n            buf.set(this.buf);\n            this.buf = buf;\n            this.length = length;\n        }\n    },\n\n    finish: function() {\n        this.length = this.pos;\n        this.pos = 0;\n        return this.buf.subarray(0, this.length);\n    },\n\n    writeFixed32: function(val) {\n        this.realloc(4);\n        writeInt32(this.buf, val, this.pos);\n        this.pos += 4;\n    },\n\n    writeSFixed32: function(val) {\n        this.realloc(4);\n        writeInt32(this.buf, val, this.pos);\n        this.pos += 4;\n    },\n\n    writeFixed64: function(val) {\n        this.realloc(8);\n        writeInt32(this.buf, val & -1, this.pos);\n        writeInt32(this.buf, Math.floor(val * SHIFT_RIGHT_32), this.pos + 4);\n        this.pos += 8;\n    },\n\n    writeSFixed64: function(val) {\n        this.realloc(8);\n        writeInt32(this.buf, val & -1, this.pos);\n        writeInt32(this.buf, Math.floor(val * SHIFT_RIGHT_32), this.pos + 4);\n        this.pos += 8;\n    },\n\n    writeVarint: function(val) {\n        val = +val || 0;\n\n        if (val > 0xfffffff || val < 0) {\n            writeBigVarint(val, this);\n            return;\n        }\n\n        this.realloc(4);\n\n        this.buf[this.pos++] =           val & 0x7f  | (val > 0x7f ? 0x80 : 0); if (val <= 0x7f) return;\n        this.buf[this.pos++] = ((val >>>= 7) & 0x7f) | (val > 0x7f ? 0x80 : 0); if (val <= 0x7f) return;\n        this.buf[this.pos++] = ((val >>>= 7) & 0x7f) | (val > 0x7f ? 0x80 : 0); if (val <= 0x7f) return;\n        this.buf[this.pos++] =   (val >>> 7) & 0x7f;\n    },\n\n    writeSVarint: function(val) {\n        this.writeVarint(val < 0 ? -val * 2 - 1 : val * 2);\n    },\n\n    writeBoolean: function(val) {\n        this.writeVarint(Boolean(val));\n    },\n\n    writeString: function(str) {\n        str = String(str);\n        this.realloc(str.length * 4);\n\n        this.pos++; // reserve 1 byte for short string length\n\n        var startPos = this.pos;\n        // write the string directly to the buffer and see how much was written\n        this.pos = writeUtf8(this.buf, str, this.pos);\n        var len = this.pos - startPos;\n\n        if (len >= 0x80) makeRoomForExtraLength(startPos, len, this);\n\n        // finally, write the message length in the reserved place and restore the position\n        this.pos = startPos - 1;\n        this.writeVarint(len);\n        this.pos += len;\n    },\n\n    writeFloat: function(val) {\n        this.realloc(4);\n        ieee754.write(this.buf, val, this.pos, true, 23, 4);\n        this.pos += 4;\n    },\n\n    writeDouble: function(val) {\n        this.realloc(8);\n        ieee754.write(this.buf, val, this.pos, true, 52, 8);\n        this.pos += 8;\n    },\n\n    writeBytes: function(buffer) {\n        var len = buffer.length;\n        this.writeVarint(len);\n        this.realloc(len);\n        for (var i = 0; i < len; i++) this.buf[this.pos++] = buffer[i];\n    },\n\n    writeRawMessage: function(fn, obj) {\n        this.pos++; // reserve 1 byte for short message length\n\n        // write the message directly to the buffer and see how much was written\n        var startPos = this.pos;\n        fn(obj, this);\n        var len = this.pos - startPos;\n\n        if (len >= 0x80) makeRoomForExtraLength(startPos, len, this);\n\n        // finally, write the message length in the reserved place and restore the position\n        this.pos = startPos - 1;\n        this.writeVarint(len);\n        this.pos += len;\n    },\n\n    writeMessage: function(tag, fn, obj) {\n        this.writeTag(tag, Pbf.Bytes);\n        this.writeRawMessage(fn, obj);\n    },\n\n    writePackedVarint:   function(tag, arr) { this.writeMessage(tag, writePackedVarint, arr);   },\n    writePackedSVarint:  function(tag, arr) { this.writeMessage(tag, writePackedSVarint, arr);  },\n    writePackedBoolean:  function(tag, arr) { this.writeMessage(tag, writePackedBoolean, arr);  },\n    writePackedFloat:    function(tag, arr) { this.writeMessage(tag, writePackedFloat, arr);    },\n    writePackedDouble:   function(tag, arr) { this.writeMessage(tag, writePackedDouble, arr);   },\n    writePackedFixed32:  function(tag, arr) { this.writeMessage(tag, writePackedFixed32, arr);  },\n    writePackedSFixed32: function(tag, arr) { this.writeMessage(tag, writePackedSFixed32, arr); },\n    writePackedFixed64:  function(tag, arr) { this.writeMessage(tag, writePackedFixed64, arr);  },\n    writePackedSFixed64: function(tag, arr) { this.writeMessage(tag, writePackedSFixed64, arr); },\n\n    writeBytesField: function(tag, buffer) {\n        this.writeTag(tag, Pbf.Bytes);\n        this.writeBytes(buffer);\n    },\n    writeFixed32Field: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed32);\n        this.writeFixed32(val);\n    },\n    writeSFixed32Field: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed32);\n        this.writeSFixed32(val);\n    },\n    writeFixed64Field: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed64);\n        this.writeFixed64(val);\n    },\n    writeSFixed64Field: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed64);\n        this.writeSFixed64(val);\n    },\n    writeVarintField: function(tag, val) {\n        this.writeTag(tag, Pbf.Varint);\n        this.writeVarint(val);\n    },\n    writeSVarintField: function(tag, val) {\n        this.writeTag(tag, Pbf.Varint);\n        this.writeSVarint(val);\n    },\n    writeStringField: function(tag, str) {\n        this.writeTag(tag, Pbf.Bytes);\n        this.writeString(str);\n    },\n    writeFloatField: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed32);\n        this.writeFloat(val);\n    },\n    writeDoubleField: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed64);\n        this.writeDouble(val);\n    },\n    writeBooleanField: function(tag, val) {\n        this.writeVarintField(tag, Boolean(val));\n    }\n};\n\nfunction readVarintRemainder(l, s, p) {\n    var buf = p.buf,\n        h, b;\n\n    b = buf[p.pos++]; h  = (b & 0x70) >> 4;  if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x7f) << 3;  if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x7f) << 10; if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x7f) << 17; if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x7f) << 24; if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x01) << 31; if (b < 0x80) return toNum(l, h, s);\n\n    throw new Error('Expected varint not more than 10 bytes');\n}\n\nfunction readPackedEnd(pbf) {\n    return pbf.type === Pbf.Bytes ?\n        pbf.readVarint() + pbf.pos : pbf.pos + 1;\n}\n\nfunction toNum(low, high, isSigned) {\n    if (isSigned) {\n        return high * 0x100000000 + (low >>> 0);\n    }\n\n    return ((high >>> 0) * 0x100000000) + (low >>> 0);\n}\n\nfunction writeBigVarint(val, pbf) {\n    var low, high;\n\n    if (val >= 0) {\n        low  = (val % 0x100000000) | 0;\n        high = (val / 0x100000000) | 0;\n    } else {\n        low  = ~(-val % 0x100000000);\n        high = ~(-val / 0x100000000);\n\n        if (low ^ 0xffffffff) {\n            low = (low + 1) | 0;\n        } else {\n            low = 0;\n            high = (high + 1) | 0;\n        }\n    }\n\n    if (val >= 0x10000000000000000 || val < -0x10000000000000000) {\n        throw new Error('Given varint doesn\\'t fit into 10 bytes');\n    }\n\n    pbf.realloc(10);\n\n    writeBigVarintLow(low, high, pbf);\n    writeBigVarintHigh(high, pbf);\n}\n\nfunction writeBigVarintLow(low, high, pbf) {\n    pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;\n    pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;\n    pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;\n    pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;\n    pbf.buf[pbf.pos]   = low & 0x7f;\n}\n\nfunction writeBigVarintHigh(high, pbf) {\n    var lsb = (high & 0x07) << 4;\n\n    pbf.buf[pbf.pos++] |= lsb         | ((high >>>= 3) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f;\n}\n\nfunction makeRoomForExtraLength(startPos, len, pbf) {\n    var extraLen =\n        len <= 0x3fff ? 1 :\n        len <= 0x1fffff ? 2 :\n        len <= 0xfffffff ? 3 : Math.ceil(Math.log(len) / (Math.LN2 * 7));\n\n    // if 1 byte isn't enough for encoding message length, shift the data to the right\n    pbf.realloc(extraLen);\n    for (var i = pbf.pos - 1; i >= startPos; i--) pbf.buf[i + extraLen] = pbf.buf[i];\n}\n\nfunction writePackedVarint(arr, pbf)   { for (var i = 0; i < arr.length; i++) pbf.writeVarint(arr[i]);   }\nfunction writePackedSVarint(arr, pbf)  { for (var i = 0; i < arr.length; i++) pbf.writeSVarint(arr[i]);  }\nfunction writePackedFloat(arr, pbf)    { for (var i = 0; i < arr.length; i++) pbf.writeFloat(arr[i]);    }\nfunction writePackedDouble(arr, pbf)   { for (var i = 0; i < arr.length; i++) pbf.writeDouble(arr[i]);   }\nfunction writePackedBoolean(arr, pbf)  { for (var i = 0; i < arr.length; i++) pbf.writeBoolean(arr[i]);  }\nfunction writePackedFixed32(arr, pbf)  { for (var i = 0; i < arr.length; i++) pbf.writeFixed32(arr[i]);  }\nfunction writePackedSFixed32(arr, pbf) { for (var i = 0; i < arr.length; i++) pbf.writeSFixed32(arr[i]); }\nfunction writePackedFixed64(arr, pbf)  { for (var i = 0; i < arr.length; i++) pbf.writeFixed64(arr[i]);  }\nfunction writePackedSFixed64(arr, pbf) { for (var i = 0; i < arr.length; i++) pbf.writeSFixed64(arr[i]); }\n\n// Buffer code below from https://github.com/feross/buffer, MIT-licensed\n\nfunction readUInt32(buf, pos) {\n    return ((buf[pos]) |\n        (buf[pos + 1] << 8) |\n        (buf[pos + 2] << 16)) +\n        (buf[pos + 3] * 0x1000000);\n}\n\nfunction writeInt32(buf, val, pos) {\n    buf[pos] = val;\n    buf[pos + 1] = (val >>> 8);\n    buf[pos + 2] = (val >>> 16);\n    buf[pos + 3] = (val >>> 24);\n}\n\nfunction readInt32(buf, pos) {\n    return ((buf[pos]) |\n        (buf[pos + 1] << 8) |\n        (buf[pos + 2] << 16)) +\n        (buf[pos + 3] << 24);\n}\n\nfunction readUtf8(buf, pos, end) {\n    var str = '';\n    var i = pos;\n\n    while (i < end) {\n        var b0 = buf[i];\n        var c = null; // codepoint\n        var bytesPerSequence =\n            b0 > 0xEF ? 4 :\n            b0 > 0xDF ? 3 :\n            b0 > 0xBF ? 2 : 1;\n\n        if (i + bytesPerSequence > end) break;\n\n        var b1, b2, b3;\n\n        if (bytesPerSequence === 1) {\n            if (b0 < 0x80) {\n                c = b0;\n            }\n        } else if (bytesPerSequence === 2) {\n            b1 = buf[i + 1];\n            if ((b1 & 0xC0) === 0x80) {\n                c = (b0 & 0x1F) << 0x6 | (b1 & 0x3F);\n                if (c <= 0x7F) {\n                    c = null;\n                }\n            }\n        } else if (bytesPerSequence === 3) {\n            b1 = buf[i + 1];\n            b2 = buf[i + 2];\n            if ((b1 & 0xC0) === 0x80 && (b2 & 0xC0) === 0x80) {\n                c = (b0 & 0xF) << 0xC | (b1 & 0x3F) << 0x6 | (b2 & 0x3F);\n                if (c <= 0x7FF || (c >= 0xD800 && c <= 0xDFFF)) {\n                    c = null;\n                }\n            }\n        } else if (bytesPerSequence === 4) {\n            b1 = buf[i + 1];\n            b2 = buf[i + 2];\n            b3 = buf[i + 3];\n            if ((b1 & 0xC0) === 0x80 && (b2 & 0xC0) === 0x80 && (b3 & 0xC0) === 0x80) {\n                c = (b0 & 0xF) << 0x12 | (b1 & 0x3F) << 0xC | (b2 & 0x3F) << 0x6 | (b3 & 0x3F);\n                if (c <= 0xFFFF || c >= 0x110000) {\n                    c = null;\n                }\n            }\n        }\n\n        if (c === null) {\n            c = 0xFFFD;\n            bytesPerSequence = 1;\n\n        } else if (c > 0xFFFF) {\n            c -= 0x10000;\n            str += String.fromCharCode(c >>> 10 & 0x3FF | 0xD800);\n            c = 0xDC00 | c & 0x3FF;\n        }\n\n        str += String.fromCharCode(c);\n        i += bytesPerSequence;\n    }\n\n    return str;\n}\n\nfunction writeUtf8(buf, str, pos) {\n    for (var i = 0, c, lead; i < str.length; i++) {\n        c = str.charCodeAt(i); // code point\n\n        if (c > 0xD7FF && c < 0xE000) {\n            if (lead) {\n                if (c < 0xDC00) {\n                    buf[pos++] = 0xEF;\n                    buf[pos++] = 0xBF;\n                    buf[pos++] = 0xBD;\n                    lead = c;\n                    continue;\n                } else {\n                    c = lead - 0xD800 << 10 | c - 0xDC00 | 0x10000;\n                    lead = null;\n                }\n            } else {\n                if (c > 0xDBFF || (i + 1 === str.length)) {\n                    buf[pos++] = 0xEF;\n                    buf[pos++] = 0xBF;\n                    buf[pos++] = 0xBD;\n                } else {\n                    lead = c;\n                }\n                continue;\n            }\n        } else if (lead) {\n            buf[pos++] = 0xEF;\n            buf[pos++] = 0xBF;\n            buf[pos++] = 0xBD;\n            lead = null;\n        }\n\n        if (c < 0x80) {\n            buf[pos++] = c;\n        } else {\n            if (c < 0x800) {\n                buf[pos++] = c >> 0x6 | 0xC0;\n            } else {\n                if (c < 0x10000) {\n                    buf[pos++] = c >> 0xC | 0xE0;\n                } else {\n                    buf[pos++] = c >> 0x12 | 0xF0;\n                    buf[pos++] = c >> 0xC & 0x3F | 0x80;\n                }\n                buf[pos++] = c >> 0x6 & 0x3F | 0x80;\n            }\n            buf[pos++] = c & 0x3F | 0x80;\n        }\n    }\n    return pos;\n}\n","'use strict';\n\nmodule.exports = Point;\n\nfunction Point(x, y) {\n    this.x = x;\n    this.y = y;\n}\n\nPoint.prototype = {\n    clone: function() { return new Point(this.x, this.y); },\n\n    add:     function(p) { return this.clone()._add(p);     },\n    sub:     function(p) { return this.clone()._sub(p);     },\n    mult:    function(k) { return this.clone()._mult(k);    },\n    div:     function(k) { return this.clone()._div(k);     },\n    rotate:  function(a) { return this.clone()._rotate(a);  },\n    matMult: function(m) { return this.clone()._matMult(m); },\n    unit:    function() { return this.clone()._unit(); },\n    perp:    function() { return this.clone()._perp(); },\n    round:   function() { return this.clone()._round(); },\n\n    mag: function() {\n        return Math.sqrt(this.x * this.x + this.y * this.y);\n    },\n\n    equals: function(p) {\n        return this.x === p.x &&\n               this.y === p.y;\n    },\n\n    dist: function(p) {\n        return Math.sqrt(this.distSqr(p));\n    },\n\n    distSqr: function(p) {\n        var dx = p.x - this.x,\n            dy = p.y - this.y;\n        return dx * dx + dy * dy;\n    },\n\n    angle: function() {\n        return Math.atan2(this.y, this.x);\n    },\n\n    angleTo: function(b) {\n        return Math.atan2(this.y - b.y, this.x - b.x);\n    },\n\n    angleWith: function(b) {\n        return this.angleWithSep(b.x, b.y);\n    },\n\n    // Find the angle of the two vectors, solving the formula for the cross product a x b = |a||b|sin(θ) for θ.\n    angleWithSep: function(x, y) {\n        return Math.atan2(\n            this.x * y - this.y * x,\n            this.x * x + this.y * y);\n    },\n\n    _matMult: function(m) {\n        var x = m[0] * this.x + m[1] * this.y,\n            y = m[2] * this.x + m[3] * this.y;\n        this.x = x;\n        this.y = y;\n        return this;\n    },\n\n    _add: function(p) {\n        this.x += p.x;\n        this.y += p.y;\n        return this;\n    },\n\n    _sub: function(p) {\n        this.x -= p.x;\n        this.y -= p.y;\n        return this;\n    },\n\n    _mult: function(k) {\n        this.x *= k;\n        this.y *= k;\n        return this;\n    },\n\n    _div: function(k) {\n        this.x /= k;\n        this.y /= k;\n        return this;\n    },\n\n    _unit: function() {\n        this._div(this.mag());\n        return this;\n    },\n\n    _perp: function() {\n        var y = this.y;\n        this.y = this.x;\n        this.x = -y;\n        return this;\n    },\n\n    _rotate: function(angle) {\n        var cos = Math.cos(angle),\n            sin = Math.sin(angle),\n            x = cos * this.x - sin * this.y,\n            y = sin * this.x + cos * this.y;\n        this.x = x;\n        this.y = y;\n        return this;\n    },\n\n    _round: function() {\n        this.x = Math.round(this.x);\n        this.y = Math.round(this.y);\n        return this;\n    }\n};\n\n// constructs Point from an array if necessary\nPoint.convert = function (a) {\n    if (a instanceof Point) {\n        return a;\n    }\n    if (Array.isArray(a)) {\n        return new Point(a[0], a[1]);\n    }\n    return a;\n};\n","'use strict';\n\nvar Point = require('point-geometry');\n\nmodule.exports = VectorTileFeature;\n\nfunction VectorTileFeature(pbf, end, extent, keys, values) {\n    // Public\n    this.properties = {};\n    this.extent = extent;\n    this.type = 0;\n\n    // Private\n    this._pbf = pbf;\n    this._geometry = -1;\n    this._keys = keys;\n    this._values = values;\n\n    pbf.readFields(readFeature, this, end);\n}\n\nfunction readFeature(tag, feature, pbf) {\n    if (tag == 1) feature.id = pbf.readVarint();\n    else if (tag == 2) readTag(pbf, feature);\n    else if (tag == 3) feature.type = pbf.readVarint();\n    else if (tag == 4) feature._geometry = pbf.pos;\n}\n\nfunction readTag(pbf, feature) {\n    var end = pbf.readVarint() + pbf.pos;\n\n    while (pbf.pos < end) {\n        var key = feature._keys[pbf.readVarint()],\n            value = feature._values[pbf.readVarint()];\n        feature.properties[key] = value;\n    }\n}\n\nVectorTileFeature.types = ['Unknown', 'Point', 'LineString', 'Polygon'];\n\nVectorTileFeature.prototype.loadGeometry = function() {\n    var pbf = this._pbf;\n    pbf.pos = this._geometry;\n\n    var end = pbf.readVarint() + pbf.pos,\n        cmd = 1,\n        length = 0,\n        x = 0,\n        y = 0,\n        lines = [],\n        line;\n\n    while (pbf.pos < end) {\n        if (!length) {\n            var cmdLen = pbf.readVarint();\n            cmd = cmdLen & 0x7;\n            length = cmdLen >> 3;\n        }\n\n        length--;\n\n        if (cmd === 1 || cmd === 2) {\n            x += pbf.readSVarint();\n            y += pbf.readSVarint();\n\n            if (cmd === 1) { // moveTo\n                if (line) lines.push(line);\n                line = [];\n            }\n\n            line.push(new Point(x, y));\n\n        } else if (cmd === 7) {\n\n            // Workaround for https://github.com/mapbox/mapnik-vector-tile/issues/90\n            if (line) {\n                line.push(line[0].clone()); // closePolygon\n            }\n\n        } else {\n            throw new Error('unknown command ' + cmd);\n        }\n    }\n\n    if (line) lines.push(line);\n\n    return lines;\n};\n\nVectorTileFeature.prototype.bbox = function() {\n    var pbf = this._pbf;\n    pbf.pos = this._geometry;\n\n    var end = pbf.readVarint() + pbf.pos,\n        cmd = 1,\n        length = 0,\n        x = 0,\n        y = 0,\n        x1 = Infinity,\n        x2 = -Infinity,\n        y1 = Infinity,\n        y2 = -Infinity;\n\n    while (pbf.pos < end) {\n        if (!length) {\n            var cmdLen = pbf.readVarint();\n            cmd = cmdLen & 0x7;\n            length = cmdLen >> 3;\n        }\n\n        length--;\n\n        if (cmd === 1 || cmd === 2) {\n            x += pbf.readSVarint();\n            y += pbf.readSVarint();\n            if (x < x1) x1 = x;\n            if (x > x2) x2 = x;\n            if (y < y1) y1 = y;\n            if (y > y2) y2 = y;\n\n        } else if (cmd !== 7) {\n            throw new Error('unknown command ' + cmd);\n        }\n    }\n\n    return [x1, y1, x2, y2];\n};\n\nVectorTileFeature.prototype.toGeoJSON = function(x, y, z) {\n    var size = this.extent * Math.pow(2, z),\n        x0 = this.extent * x,\n        y0 = this.extent * y,\n        coords = this.loadGeometry(),\n        type = VectorTileFeature.types[this.type],\n        i, j;\n\n    function project(line) {\n        for (var j = 0; j < line.length; j++) {\n            var p = line[j], y2 = 180 - (p.y + y0) * 360 / size;\n            line[j] = [\n                (p.x + x0) * 360 / size - 180,\n                360 / Math.PI * Math.atan(Math.exp(y2 * Math.PI / 180)) - 90\n            ];\n        }\n    }\n\n    switch (this.type) {\n    case 1:\n        var points = [];\n        for (i = 0; i < coords.length; i++) {\n            points[i] = coords[i][0];\n        }\n        coords = points;\n        project(coords);\n        break;\n\n    case 2:\n        for (i = 0; i < coords.length; i++) {\n            project(coords[i]);\n        }\n        break;\n\n    case 3:\n        coords = classifyRings(coords);\n        for (i = 0; i < coords.length; i++) {\n            for (j = 0; j < coords[i].length; j++) {\n                project(coords[i][j]);\n            }\n        }\n        break;\n    }\n\n    if (coords.length === 1) {\n        coords = coords[0];\n    } else {\n        type = 'Multi' + type;\n    }\n\n    var result = {\n        type: \"Feature\",\n        geometry: {\n            type: type,\n            coordinates: coords\n        },\n        properties: this.properties\n    };\n\n    if ('id' in this) {\n        result.id = this.id;\n    }\n\n    return result;\n};\n\n// classifies an array of rings into polygons with outer rings and holes\n\nfunction classifyRings(rings) {\n    var len = rings.length;\n\n    if (len <= 1) return [rings];\n\n    var polygons = [],\n        polygon,\n        ccw;\n\n    for (var i = 0; i < len; i++) {\n        var area = signedArea(rings[i]);\n        if (area === 0) continue;\n\n        if (ccw === undefined) ccw = area < 0;\n\n        if (ccw === area < 0) {\n            if (polygon) polygons.push(polygon);\n            polygon = [rings[i]];\n\n        } else {\n            polygon.push(rings[i]);\n        }\n    }\n    if (polygon) polygons.push(polygon);\n\n    return polygons;\n}\n\nfunction signedArea(ring) {\n    var sum = 0;\n    for (var i = 0, len = ring.length, j = len - 1, p1, p2; i < len; j = i++) {\n        p1 = ring[i];\n        p2 = ring[j];\n        sum += (p2.x - p1.x) * (p1.y + p2.y);\n    }\n    return sum;\n}\n","'use strict';\n\nvar VectorTileFeature = require('./vectortilefeature.js');\n\nmodule.exports = VectorTileLayer;\n\nfunction VectorTileLayer(pbf, end) {\n    // Public\n    this.version = 1;\n    this.name = null;\n    this.extent = 4096;\n    this.length = 0;\n\n    // Private\n    this._pbf = pbf;\n    this._keys = [];\n    this._values = [];\n    this._features = [];\n\n    pbf.readFields(readLayer, this, end);\n\n    this.length = this._features.length;\n}\n\nfunction readLayer(tag, layer, pbf) {\n    if (tag === 15) layer.version = pbf.readVarint();\n    else if (tag === 1) layer.name = pbf.readString();\n    else if (tag === 5) layer.extent = pbf.readVarint();\n    else if (tag === 2) layer._features.push(pbf.pos);\n    else if (tag === 3) layer._keys.push(pbf.readString());\n    else if (tag === 4) layer._values.push(readValueMessage(pbf));\n}\n\nfunction readValueMessage(pbf) {\n    var value = null,\n        end = pbf.readVarint() + pbf.pos;\n\n    while (pbf.pos < end) {\n        var tag = pbf.readVarint() >> 3;\n\n        value = tag === 1 ? pbf.readString() :\n            tag === 2 ? pbf.readFloat() :\n            tag === 3 ? pbf.readDouble() :\n            tag === 4 ? pbf.readVarint64() :\n            tag === 5 ? pbf.readVarint() :\n            tag === 6 ? pbf.readSVarint() :\n            tag === 7 ? pbf.readBoolean() : null;\n    }\n\n    return value;\n}\n\n// return feature `i` from this layer as a `VectorTileFeature`\nVectorTileLayer.prototype.feature = function(i) {\n    if (i < 0 || i >= this._features.length) throw new Error('feature index out of bounds');\n\n    this._pbf.pos = this._features[i];\n\n    var end = this._pbf.readVarint() + this._pbf.pos;\n    return new VectorTileFeature(this._pbf, end, this.extent, this._keys, this._values);\n};\n","'use strict';\n\nvar VectorTileLayer = require('./vectortilelayer');\n\nmodule.exports = VectorTile;\n\nfunction VectorTile(pbf, end) {\n    this.layers = pbf.readFields(readTile, {}, end);\n}\n\nfunction readTile(tag, layers, pbf) {\n    if (tag === 3) {\n        var layer = new VectorTileLayer(pbf, pbf.readVarint() + pbf.pos);\n        if (layer.length) layers[layer.name] = layer;\n    }\n}\n\n","/*\n * Copyright 2017, Joachim Kuebart <joachim.kuebart@gmail.com>\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n *   1. Redistributions of source code must retain the above copyright\n *\tnotice, this list of conditions and the following disclaimer.\n *\n *   2. Redistributions in binary form must reproduce the above copyright\n *\tnotice, this list of conditions and the following disclaimer in the\n *\tdocumentation and/or other materials provided with the\n *\tdistribution.\n *\n *   3. Neither the name of the copyright holder nor the names of its\n *\tcontributors may be used to endorse or promote products derived\n *\tfrom this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n */\n\n    function zip() {\n\tconst args = Array.prototype.slice.call(arguments);\n\treturn Object.keys(args[0]).map(i => args.map(a => a[i]));\n    }\n\n    /**\n     * An immutable value type for summaries.\n     */\n    function summary() {\n\treturn summaryImp(0, 0);\n\n\t// Private implementation\n\tfunction summaryImp(m_walks, m_distance) {\n\t    const self = {};\n\n\t    self.walks = () => m_walks;\n\t    self.distance = () => m_distance;\n\n\t    self.toString = function () {\n\t\treturn [\n\t\t    `${m_walks} walks`, +(m_distance / 1000).toFixed(1) +'km',\n\t\t].join(' — ');\n\t    };\n\n\t    self.accumulate = function (dist) {\n\t\treturn summaryImp(1 + m_walks, dist + m_distance);\n\t    };\n\n\t    return self;\n\t}\n    }\n\n    /**\n     * The summary pane reacts to changes in the visible year layers.\n     */\n    export function summaryPane(walks, onChange) {\n\tconst self = {};\n\tconst m_visibleYears = {};\n\tlet m_summary = summary();\n\n\tfunction handleVisible(year, visible) {\n\t    if (visible != m_visibleYears[year]) {\n\t\tm_visibleYears[year] = visible;\n\t\tm_summary = walks.flatMap(\n\t\t\twalk => zip(walk.dates, walk.distances)\n\t\t    ).reduce(function (sum, dateDistance) {\n\t\t\tif (m_visibleYears[dateDistance[0].substr(0, 4)]) {\n\t\t\t    return sum.accumulate(dateDistance[1]);\n\t\t\t} else {\n\t\t\t    return sum;\n\t\t\t}\n\t\t    }, summary());\n\t\tif (onChange) {\n\t\t    onChange.call(self);\n\t\t}\n\t    }\n\t}\n\n\tself.addLayer = function (layer, year) {\n\t    layer.on('add', handleVisible.bind(null, year, true)).\n\t\ton('remove', handleVisible.bind(null, year, false));\n\t    return self;\n\t};\n\n\tself.removeLayer = function (layer) {\n\t    layer.off('add').off('remove');\n\t    return self;\n\t};\n\n\tself.render = function () {\n\t    const frag = document.createDocumentFragment();\n\t    if (m_summary.walks()) {\n\t\tconst div = document.createElement('div');\n\t\tdiv.textContent = ''+ m_summary;\n\t\tfrag.appendChild(div);\n\t    }\n\t    return frag;\n\t};\n\n\treturn self;\n    }\n","/*\n * Copyright 2017, Joachim Kuebart <joachim.kuebart@gmail.com>\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n *   1. Redistributions of source code must retain the above copyright\n *\tnotice, this list of conditions and the following disclaimer.\n *\n *   2. Redistributions in binary form must reproduce the above copyright\n *\tnotice, this list of conditions and the following disclaimer in the\n *\tdocumentation and/or other materials provided with the\n *\tdistribution.\n *\n *   3. Neither the name of the copyright holder nor the names of its\n *\tcontributors may be used to endorse or promote products derived\n *\tfrom this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport L from 'leaflet';\nimport {} from './VectorGrid';\nimport require from 'require';\nimport { summaryPane } from './summary.js';\nimport {} from './util.js';\n\nexport const CSS = {\n    'DETAILS': 'gpxmap-details',\n    'HBOX': 'gpxmap-hbox',\n    'SELECT': 'gpxmap-select',\n    'TRACK': 'gpxmap-track',\n    'VBOX': 'gpxmap-vbox',\n    'VIEW': 'gpxmap-view',\n};\n\n/**\n * If this looks familiar that's because it's binary search. We find\n * 0 <= i <= array.length such that !pred(i - 1) && pred(i) under the\n * assumption !pred(-1) && pred(length).\n */\nfunction search(array, pred) {\n    let le = -1, ri = array.length;\n    while (1 + le !== ri) {\n\tconst mi = le + ((ri - le) >> 1);\n\tif (pred(array[mi])) {\n\t    ri = mi;\n\t} else {\n\t    le = mi;\n\t}\n    }\n    return ri;\n}\n\nfunction yearColour(idx) {\n    return ['hsl(',\n\t170 + 45 * (idx >> 1), ',',\n\t100, '%,',\n\t27 * (1 + idx % 2), '%)'\n    ].join('');\n}\n\nfunction walkPopup(date, walk) {\n    const idx = search(walk.dates, d => date <= d);\n\n    if (walk.dates[idx] !== date) {\n\tconsole.log('walkPopup', date, walk);\n\treturn;\n    }\n\n    const popup = document.createDocumentFragment();\n    let elem0 = document.createElement('h3');\n    elem0.textContent = walk.title;\n    popup.appendChild(elem0);\n\n    elem0 = document.createElement('div');\n    elem0.textContent = [\n\t    [ +date.substr(8, 2)\n\t    , +date.substr(5, 2)\n\t    , +date.substr(0, 4)\n\t    ].join('/'),\n\t    +(walk.distances[idx] / 1000).toFixed(1) +'km',\n\t    `${walk.walkers} walkers`,\n\t    walk.categories.join(' — '),\n\t    '',\n\t].join(' — ');\n\n    const anchor = document.createElement('a');\n    anchor.setAttribute('href', walk.link);\n    anchor.textContent = 'blog';\n    elem0.appendChild(anchor);\n    popup.appendChild(elem0);\n\n    elem0 = document.createElement('p');\n    elem0.textContent = walk.people.sort().join(' • ');\n    popup.appendChild(elem0);\n\n    return popup;\n}\n\nfunction getFeatureId(walk) {\n    return walk.properties.date;\n}\n\nexport function gpxmap(id, options) {\n    // Create all configured tile layers.\n    const tileLayers = options.tileLayers.map(function (layer) {\n\treturn {\n\t    'name': layer.name,\n\t    'tileLayer': L.tileLayer(layer.url, layer.options),\n\t};\n    });\n\n    // Create layers control.\n    const layersControl = L.control.layers(null, null, { 'hideSingleBase':true });\n    tileLayers.forEach(function (layer) {\n\tlayersControl.addBaseLayer(layer.tileLayer, layer.name);\n    });\n\n    // Create the DOM structure for our map.\n    const domContainer = L.DomUtil.get(id);\n    L.DomUtil.addClass(domContainer, CSS.VBOX);\n\n    // Create map with an initial tile layer and layers control.\n    const gpxmap = L.map(L.DomUtil.create('div', CSS.VIEW, domContainer)).\n\taddControl(L.control.scale()).\n\taddControl(layersControl).\n\taddLayer(tileLayers[0].tileLayer);\n\n    const domDetails = L.DomUtil.create('div', CSS.DETAILS, domContainer);\n    function renderSummary() {\n\tconst h3 = L.DomUtil.create('h3');\n\n\th3.textContent = options.title;\n\tL.DomUtil.empty(domDetails);\n\tdomDetails.appendChild(h3);\n\tdomDetails.appendChild(this.render());\n    }\n\n    const hiddenYear = {};\n    function trackStyle(hover, selected) {\n\treturn function (props) {\n\t    const year = props.date.substr(0, 4);\n\t    return hiddenYear[year] ? [] : {\n\t\t'className': CSS.TRACK,\n\t\t'color': yearColour(year - 2011),\n\t\t'opacity': hover ? 1 : .8,\n\t\t'weight': hover ? 4 : selected ? 3.5 : 2,\n\t    };\n\t};\n    }\n\n    // This layer shows walking tracks.\n    const walkLayer = L.vectorGrid.protobuf(\n\toptions.url, {\n\t    'pane': 'overlayPane',\n\t    'maxNativeZoom': 13,\n\t    getFeatureId,\n\t    'vectorTileLayerStyles': { '': trackStyle(false) },\n\t}\n    ).addTo(gpxmap);\n\n    // This layer has invisible mouse-responsive tracks.\n    let selected;\n    const mouseLayer = L.vectorGrid.protobuf(\n\toptions.url, {\n\t    'pane': 'overlayPane',\n\t    'maxNativeZoom': 13,\n\t    getFeatureId,\n\t    'vectorTileLayerStyles': { '': function (props) {\n\t\treturn hiddenYear[props.date.substr(0, 4)] ? [] : {\n\t\t    'opacity': 0,\n\t\t    'weight': 20,\n\t\t};\n\t    } },\n\t    'interactive': true,\n\t}\n    ).on('mouseover', function (evt) {\n\tconst date = getFeatureId(evt.layer);\n\twalkLayer.setFeatureStyle(date, trackStyle(true));\n    }).on('mouseout', function (evt) {\n\tconst date = getFeatureId(evt.layer);\n\tif (date === selected) {\n\t    walkLayer.setFeatureStyle(date, trackStyle(false, true));\n\t} else {\n\t    walkLayer.resetFeatureStyle(date);\n\t}\n    }).addTo(gpxmap);\n\n    require([ `dA/json!${options.index}` ], function (walks) {\n\t// Collect all years.\n\tconst years = {};\n\twalks.flatMap(walk => walk.dates).\n\t    forEach(date => years[date.substr(0, 4)] = true);\n\n\t// Build popup from matching index entry.\n\tmouseLayer.on('click', function (evt) {\n\t    const date = getFeatureId(evt.layer);\n\n\t    L.DomEvent.stopPropagation(evt);\n\t    if (date === selected) {\n\t\treturn;\n\t    }\n\t    deselect();\n\n\t    const idx = search(walks, walk => date < walk.dates[0]) - 1;\n\t    const popup = walkPopup(date, walks[idx]);\n\t    if (popup) {\n\t\tL.DomUtil.empty(domDetails);\n\t\tdomDetails.appendChild(popup);\n\t\tselected = date;\n\t\twalkLayer.setFeatureStyle(selected, trackStyle(true, true));\n\t    }\n\t});\n\n\t// Set up a summary pane that reacts when years are toggled.\n\tconst sumPane = summaryPane(walks, renderSummary);\n\tfunction deselect() {\n\t    if (selected) {\n\t\twalkLayer.resetFeatureStyle(selected);\n\t\tselected = void 0;\n\t\trenderSummary.call(sumPane);\n\t    }\n\t}\n\tgpxmap.on('click', deselect);\n\n\t// Create one layer group per year and add to the map.\n\tObject.keys(years).forEach(function (year) {\n\t    const lg = L.layerGroup().on('add', function () {\n\t\tif (hiddenYear[year]) {\n\t\t    hiddenYear[year] = false;\n\t\t    walkLayer.redraw();\n\t\t    mouseLayer.redraw();\n\t\t}\n\t    }).on('remove', function () {\n\t\tif (!hiddenYear[year]) {\n\t\t    hiddenYear[year] = true;\n\t\t    walkLayer.redraw();\n\t\t    mouseLayer.redraw();\n\t\t}\n\t    });\n\t    gpxmap.addLayer(lg);\n\t    layersControl.addOverlay(lg, year);\n\t    sumPane.addLayer(lg, year);\n\t});\n\n\t// Adjust the map's viewport when all GPX tracks are loaded\n\tconst bounds = L.latLngBounds(walks.flatMap(walk => walk.bboxes).\n\t    flatMap(function (bbox) {\n\t\tconst l = bbox.length >> 1;\n\t\treturn L.GeoJSON.coordsToLatLngs([\n\t\t    [ bbox[0], bbox[1] ], [ bbox[l], bbox[1 + l] ]\n\t\t]);\n\t    })\n\t);\n\tgpxmap.setMaxBounds(bounds.pad(.05)).fitBounds(bounds);\n    });\n\n    return gpxmap;\n}\n","\n\nL.SVG.Tile = L.SVG.extend({\n\n\tinitialize: function (tileCoord, tileSize, options) {\n\t\tL.SVG.prototype.initialize.call(this, options);\n\t\tthis._tileCoord = tileCoord;\n\t\tthis._size = tileSize;\n\n\t\tthis._initContainer();\n\t\tthis._container.setAttribute('width', this._size.x);\n\t\tthis._container.setAttribute('height', this._size.y);\n\t\tthis._container.setAttribute('viewBox', [0, 0, this._size.x, this._size.y].join(' '));\n\n\t\tif (options.interactive) {\n\t\t\t// By default, Leaflet tiles do not have pointer events\n\t\t\tthis._container.style.pointerEvents = 'auto';\n\t\t}\n\t\tthis._layers = {};\n\t},\n\n\tgetCoord: function() {\n\t\treturn this._tileCoord;\n\t},\n\n\tgetContainer: function() {\n\t\treturn this._container;\n\t},\n\n\tonAdd: L.Util.falseFn,\n\n\taddTo: function(map) {\n\t\tthis._map = map;\n\t\tif (this.options.interactive) {\n\t\t\tfor (var i in this._layers) {\n\t\t\t\tvar layer = this._layers[i];\n\t\t\t\tthis._map._targets[L.stamp(layer._path)] = layer;\n\t\t\t}\n\t\t}\n\t},\n\n\t_initContainer: function() {\n\t\tL.SVG.prototype._initContainer.call(this);\n\t\tvar rect =  L.SVG.create('rect');\n\t},\n\n\t/// TODO: Modify _initPath to include an extra parameter, a group name\n\t/// to order symbolizers by z-index\n\n\t_addPath: function (layer) {\n\t\tthis._rootGroup.appendChild(layer._path);\n\t\tthis._layers[L.stamp(layer)] = layer;\n\t},\n\n\t_updateIcon: function (layer) {\n\t\tvar path = layer._path = L.SVG.create('image'),\n\t\t    icon = layer.options.icon,\n\t\t    options = icon.options,\n\t\t    size = L.point(options.iconSize),\n\t\t    anchor = options.iconAnchor ||\n\t\t        \t size && size.divideBy(2, true),\n\t\t    p = layer._point.subtract(anchor);\n\t\tpath.setAttribute('x', p.x);\n\t\tpath.setAttribute('y', p.y);\n\t\tpath.setAttribute('width', size.x + 'px');\n\t\tpath.setAttribute('height', size.y + 'px');\n\t\tpath.setAttribute('href', options.iconUrl);\n\t}\n});\n\n\nL.svg.tile = function(tileCoord, tileSize, opts){\n\treturn new L.SVG.Tile(tileCoord, tileSize, opts);\n}\n\n","import {} from './Leaflet.Renderer.SVG.Tile.js';\n\nL.VectorGrid = L.GridLayer.extend({\n\n\toptions: {\n\t\trendererFactory: L.svg.tile,\n\t\tvectorTileLayerStyles: {},\n\t\tinteractive: false\n\t},\n\n\tinitialize: function(options) {\n\t\tL.setOptions(this, options);\n\t\tL.GridLayer.prototype.initialize.apply(this, arguments);\n\t\tif (this.options.getFeatureId) {\n\t\t\tthis._vectorTiles = {};\n\t\t\tthis._overriddenStyles = {};\n\t\t\tthis.on('tileunload', function(e) {\n\t\t\t\tdelete this._vectorTiles[this._tileCoordsToKey(e.coords)];\n\t\t\t}, this);\n\t\t}\n\t},\n\n\tcreateTile: function(coords, done) {\n\t\tvar storeFeatures = this.options.getFeatureId;\n\n\t\tvar tileSize = this.getTileSize();\n\t\tvar renderer = this.options.rendererFactory(coords, tileSize, this.options);\n\n\t\tvar vectorTilePromise = this._getVectorTilePromise(coords);\n\n\t\tif (storeFeatures) {\n\t\t\tthis._vectorTiles[this._tileCoordsToKey(coords)] = renderer;\n\t\t\trenderer._features = {};\n\t\t}\n\n\t\tvectorTilePromise.then( function renderTile(vectorTile) {\n\t\t\tfor (var layerName in vectorTile.layers) {\n\t\t\t\tvar layer = vectorTile.layers[layerName];\n\n\t\t\t\t/// NOTE: THIS ASSUMES SQUARE TILES!!!!!1!\n\t\t\t\tvar pxPerExtent = this.getTileSize().x / layer.extent;\n\n\t\t\t\tvar layerStyle = this.options.vectorTileLayerStyles[ layerName ] ||\n\t\t\t\tL.Path.prototype.options;\n\n\t\t\t\tfor (var i in layer.features) {\n\t\t\t\t\tvar feat = layer.features[i];\n\t\t\t\t\tvar id;\n\n\t\t\t\t\tvar styleOptions = layerStyle;\n\t\t\t\t\tif (storeFeatures) {\n\t\t\t\t\t\tid = this.options.getFeatureId(feat);\n\t\t\t\t\t\tvar styleOverride = this._overriddenStyles[id];\n\t\t\t\t\t\tif (styleOverride) {\n\t\t\t\t\t\t\tif (styleOverride[layerName]) {\n\t\t\t\t\t\t\t\tstyleOptions = styleOverride[layerName];\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tstyleOptions = styleOverride;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (styleOptions instanceof Function) {\n\t\t\t\t\t\tstyleOptions = styleOptions(feat.properties, coords.z);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!(styleOptions instanceof Array)) {\n\t\t\t\t\t\tstyleOptions = [styleOptions];\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!styleOptions.length) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar featureLayer = this._createLayer(feat, pxPerExtent);\n\n\t\t\t\t\tfor (var j in styleOptions) {\n\t\t\t\t\t\tvar style = L.extend({}, L.Path.prototype.options, styleOptions[j]);\n\t\t\t\t\t\tfeatureLayer.render(renderer, style);\n\t\t\t\t\t\trenderer._addPath(featureLayer);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.options.interactive) {\n\t\t\t\t\t\tfeatureLayer.makeInteractive();\n\t\t\t\t\t}\n\n\t\t\t\t\tif (storeFeatures) {\n\t\t\t\t\t\trenderer._features[id] = {\n\t\t\t\t\t\t\tlayerName: layerName,\n\t\t\t\t\t\t\tfeature: featureLayer\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\t\t\tif (this._map != null) {\n\t\t\t\trenderer.addTo(this._map);\n\t\t\t}\n\t\t\tL.Util.requestAnimFrame(done.bind(coords, null, null));\n\t\t}.bind(this));\n\n\t\treturn renderer.getContainer();\n\t},\n\n\tsetFeatureStyle: function(id, layerStyle) {\n\t\tthis._overriddenStyles[id] = {}\n\n\t\tfor (var tileKey in this._vectorTiles) {\n\t\t\tvar tile = this._vectorTiles[tileKey];\n\t\t\tvar features = tile._features;\n\t\t\tvar data = features[id];\n\t\t\tif (data) {\n\t\t\t\tthis._overriddenStyles[id] = layerStyle;\n\t\t\t\tvar feat = data.feature;\n\n\t\t\t\tvar styleOptions = layerStyle;\n\t\t\t\tif (layerStyle[data.layerName]) {\n\t\t\t\t\tstyleOptions = layerStyle[data.layerName];\n\t\t\t\t}\n\n\t\t\t\tstyleOptions = (styleOptions instanceof Function) ?\n\t\t\t\t\tstyleOptions(feat.properties, tile.getCoord().z) :\n\t\t\t\t\tstyleOptions;\n\n\t\t\t\tthis._updateStyles(feat, tile, styleOptions);\n\t\t\t} else {\n\t\t\t\tthis._overriddenStyles[id] = layerStyle;\n\t\t\t}\n\t\t}\n\t},\n\n\tresetFeatureStyle: function(id) {\n\t\tdelete this._overriddenStyles[id];\n\n\t\tfor (var tileKey in this._vectorTiles) {\n\t\t\tvar tile = this._vectorTiles[tileKey];\n\t\t\tvar features = tile._features;\n\t\t\tvar data = features[id];\n\t\t\tif (data) {\n\t\t\t\tvar feat = data.feature;\n\t\t\t\tvar layerStyle = this.options.vectorTileLayerStyles[ data.layerName ] ||\n\t\t\t\tL.Path.prototype.options;\n\t\t\t\tvar styleOptions = (layerStyle instanceof Function) ?\n\t\t\t\tlayerStyle(feat.properties, tile.getCoord().z) :\n\t\t\t\tlayerStyle;\n\t\t\t\tthis._updateStyles(feat, tile, styleOptions);\n\t\t\t}\n\t\t}\n\t},\n\n\t_updateStyles: function(feat, renderer, styleOptions) {\n\t\tif (!(styleOptions instanceof Array)) {\n\t\t\tstyleOptions = [styleOptions];\n\t\t}\n\n\t\tfor (var j in styleOptions) {\n\t\t\tvar style = L.extend({}, L.Path.prototype.options, styleOptions[j]);\n\t\t\tfeat.updateStyle(renderer, style);\n\t\t}\n\t},\n\n\t_createLayer: function(feat, pxPerExtent, layerStyle) {\n\t\tvar layer;\n\t\tswitch (feat.type) {\n\t\tcase 1:\n\t\t\tlayer = new PointLayer(feat, pxPerExtent);\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\tlayer = new PolylineLayer(feat, pxPerExtent);\n\t\t\tbreak;\n\t\tcase 3:\n\t\t\tlayer = new PolygonLayer(feat, pxPerExtent);\n\t\t\tbreak;\n\t\t}\n\n\t\tif (this.options.interactive) {\n\t\t\tlayer.addEventParent(this);\n\t\t}\n\n\t\treturn layer;\n\t},\n});\n\nL.vectorGrid = function (options) {\n\treturn new L.VectorGrid(options);\n};\n\nvar FeatureLayer = L.Class.extend({\n\trender: function(renderer, style) {\n\t\tthis._renderer = renderer;\n\t\tthis.options = style;\n\t\trenderer._initPath(this);\n\t\trenderer._updateStyle(this);\n\t},\n\n\tupdateStyle: function(renderer, style) {\n\t\tthis.options = style;\n\t\trenderer._updateStyle(this);\n\t},\n\n\t_getPixelBounds: function() {\n\t\tvar parts = this._parts;\n\t\tvar bounds = L.bounds([]);\n\t\tfor (var i = 0; i < parts.length; i++) {\n\t\t\tvar part = parts[i];\n\t\t\tfor (var j = 0; j < part.length; j++) {\n\t\t\t\tbounds.extend(part[j]);\n\t\t\t}\n\t\t}\n\n\t\tvar w = this._clickTolerance(),\n\t\t    p = new L.Point(w, w);\n\n\t\tbounds.min._subtract(p);\n\t\tbounds.max._add(p);\n\n\t\treturn bounds;\n\t},\n\t_clickTolerance: L.Path.prototype._clickTolerance,\n});\n\nvar PointLayer = L.CircleMarker.extend({\n\tincludes: FeatureLayer.prototype,\n\n\tstatics: {\n\t\ticonCache: {}\n\t},\n\n\tinitialize: function(feature, pxPerExtent) {\n\t\tthis.properties = feature.properties;\n\t\tthis._makeFeatureParts(feature, pxPerExtent);\n\t},\n\n\trender: function(renderer, style) {\n\t\tFeatureLayer.prototype.render.call(this, renderer, style);\n\t\tthis._radius = style.radius || L.CircleMarker.prototype.options.radius;\n\t\tthis._updatePath();\n\t},\n\n\t_makeFeatureParts: function(feat, pxPerExtent) {\n\t\tvar coord = feat.geometry[0];\n\t\tif (typeof coord[0] === 'object' && 'x' in coord[0]) {\n\t\t\t// Protobuf vector tiles return [{x: , y:}]\n\t\t\tthis._point = L.point(coord[0].x * pxPerExtent, coord[0].y * pxPerExtent);\n\t\t\tthis._empty = L.Util.falseFn;\n\t\t} else {\n\t\t\t// Geojson-vt returns [,]\n\t\t\tthis._point = L.point(coord[0] * pxPerExtent, coord[1] * pxPerExtent);\n\t\t\tthis._empty = L.Util.falseFn;\n\t\t}\n\t},\n\n\tmakeInteractive: function() {\n\t\tthis._updateBounds();\n\t},\n\n\tupdateStyle: function(renderer, style) {\n\t\tthis._radius = style.radius || this._radius;\n\t\tthis._updateBounds();\n\t\treturn FeatureLayer.prototype.updateStyle.call(this, renderer, style);\n\t},\n\n\t_updateBounds: function() {\n\t\tvar icon = this.options.icon\n\t\tif (icon) {\n\t\t\tvar size = L.point(icon.options.iconSize),\n\t\t\t    anchor = icon.options.iconAnchor ||\n\t\t\t             size && size.divideBy(2, true),\n\t\t\t    p = this._point.subtract(anchor);\n\t\t\tthis._pxBounds = new L.Bounds(p, p.add(icon.options.iconSize));\n\t\t} else {\n\t\t\tL.CircleMarker.prototype._updateBounds.call(this);\n\t\t}\n\t},\n\n\t_updatePath: function() {\n\t\tif (this.options.icon) {\n\t\t\tthis._renderer._updateIcon(this)\n\t\t} else {\n\t\t\tL.CircleMarker.prototype._updatePath.call(this);\n\t\t}\n\t},\n\n\t_getImage: function () {\n\t\tif (this.options.icon) {\n\t\t\tvar url = this.options.icon.options.iconUrl,\n\t\t\t    img = PointLayer.iconCache[url];\n\t\t\tif (!img) {\n\t\t\t\tvar icon = this.options.icon;\n\t\t\t\timg = PointLayer.iconCache[url] = icon.createIcon();\n\t\t\t}\n\t\t\treturn img;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\n\t},\n\n\t_containsPoint: function(p) {\n\t\tvar icon = this.options.icon;\n\t\tif (icon) {\n\t\t\treturn this._pxBounds.contains(p);\n\t\t} else {\n\t\t\treturn L.CircleMarker.prototype._containsPoint.call(this, p);\n\t\t}\n\t}\n});\n\nvar polyBase = {\n\t_makeFeatureParts: function(feat, pxPerExtent) {\n\t\tvar rings = feat.geometry;\n\t\tvar coord;\n\n\t\tthis._parts = [];\n\t\tfor (var i in rings) {\n\t\t\tvar ring = rings[i];\n\t\t\tvar part = [];\n\t\t\tfor (var j in ring) {\n\t\t\t\tcoord = ring[j];\n\t\t\t\tif ('x' in coord) {\n\t\t\t\t\t// Protobuf vector tiles return {x: , y:}\n\t\t\t\t\tpart.push(L.point(coord.x * pxPerExtent, coord.y * pxPerExtent));\n\t\t\t\t} else {\n\t\t\t\t\t// Geojson-vt returns [,]\n\t\t\t\t\tpart.push(L.point(coord[0] * pxPerExtent, coord[1] * pxPerExtent));\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._parts.push(part);\n\t\t}\n\t},\n\n\tmakeInteractive: function() {\n\t\tthis._pxBounds = this._getPixelBounds();\n\t}\n};\n\nvar PolylineLayer = L.Polyline.extend({\n\tincludes: [FeatureLayer.prototype, polyBase],\n\n\tinitialize: function(feature, pxPerExtent) {\n\t\tthis.properties = feature.properties;\n\t\tthis._makeFeatureParts(feature, pxPerExtent);\n\t},\n\n\trender: function(renderer, style) {\n\t\tstyle.fill = false;\n\t\tFeatureLayer.prototype.render.call(this, renderer, style);\n\t\tthis._updatePath();\n\t},\n\n\tupdateStyle: function(renderer, style) {\n\t\tstyle.fill = false;\n\t\tFeatureLayer.prototype.updateStyle.call(this, renderer, style);\n\t},\n});\n\nvar PolygonLayer = L.Polygon.extend({\n\tincludes: [FeatureLayer.prototype, polyBase],\n\n\tinitialize: function(feature, pxPerExtent) {\n\t\tthis.properties = feature.properties;\n\t\tthis._makeFeatureParts(feature, pxPerExtent);\n\t},\n\n\trender: function(renderer, style) {\n\t\tFeatureLayer.prototype.render.call(this, renderer, style);\n\t\tthis._updatePath();\n\t}\n});\n","exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = nBytes * 8 - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = nBytes * 8 - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = (value * c - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","module.exports.VectorTile = require('./lib/vectortile.js');\nmodule.exports.VectorTileFeature = require('./lib/vectortilefeature.js');\nmodule.exports.VectorTileLayer = require('./lib/vectortilelayer.js');\n","\nimport Pbf from 'pbf';\nimport {VectorTile} from 'vector-tile';\n\n// Network & Protobuf powered!\n// NOTE: Assumes the globals `VectorTile` and `Pbf` exist!!!\nL.VectorGrid.Protobuf = L.VectorGrid.extend({\n\n\toptions: {\n\t\tminZoom: 0,\t\t// Like L.TileLayer\n\t\tmaxZoom: 18,\t\t// Like L.TileLayer\n\t\tmaxNativeZoom: null,\t// Like L.TileLayer\n\t\tminNativeZoom: null,\t// Like L.TileLayer\n\t\tsubdomains: 'abc',\t// Like L.TileLayer\n\t\tzoomOffset: 0,\t\t// Like L.TileLayer\n\t\tzoomReverse: false,\t// Like L.TileLayer\n\t},\n\n\n\tinitialize: function(url, options) {\n\t\t// Inherits options from geojson-vt!\n// \t\tthis._slicer = geojsonvt(geojson, options);\n\t\tthis._url = url;\n\t\tL.VectorGrid.prototype.initialize.call(this, options);\n\t},\n\n\n\t_getSubdomain: L.TileLayer.prototype._getSubdomain,\n\n\tgetTileSize: L.TileLayer.prototype.getTileSize,\n\n\t_getZoomForUrl: L.TileLayer.prototype._getZoomForUrl,\n\n\t_getVectorTilePromise: function(coords) {\n\t\tvar data = {\n\t\t\ts: this._getSubdomain(coords),\n\t\t\tx: coords.x,\n\t\t\ty: coords.y,\n\t\t\tz: this._getZoomForUrl(),\n\t\t};\n\t\tif (this._map && !this._map.options.crs.infinite) {\n\t\t\tvar invertedY = this._globalTileRange.max.y - coords.y;\n\t\t\tif (this.options.tms) { // Should this option be available in Leaflet.VectorGrid?\n\t\t\t\tdata['y'] = invertedY;\n\t\t\t}\n\t\t\tdata['-y'] = invertedY;\n\t\t}\n\n\t\tvar tileUrl = L.Util.template(this._url, L.extend(data, this.options));\n\n\t\treturn fetch(tileUrl).then(function(response){\n\n\t\t\tif (!response.ok) {\n\t\t\t\treturn {layers:[]};\n\t\t\t}\n\n\t\t\treturn response.blob().then( function (blob) {\n// \t\t\t\tconsole.log(blob);\n\n\t\t\t\tvar reader = new FileReader();\n\t\t\t\treturn new Promise(function(resolve){\n\t\t\t\t\treader.addEventListener(\"loadend\", function() {\n\t\t\t\t\t\t// reader.result contains the contents of blob as a typed array\n\n\t\t\t\t\t\t// blob.type === 'application/x-protobuf'\n\t\t\t\t\t\tvar pbf = new Pbf( reader.result );\n// \t\t\t\t\t\tconsole.log(pbf);\n\t\t\t\t\t\treturn resolve(new VectorTile( pbf ));\n\n\t\t\t\t\t});\n\t\t\t\t\treader.readAsArrayBuffer(blob);\n\t\t\t\t});\n\t\t\t});\n\t\t}).then(function(json){\n\n// \t\t\tconsole.log('Vector tile:', json.layers);\n// \t\t\tconsole.log('Vector tile water:', json.layers.water);\t// Instance of VectorTileLayer\n\n\t\t\t// Normalize feature getters into actual instanced features\n\t\t\tfor (var layerName in json.layers) {\n\t\t\t\tvar feats = [];\n\n\t\t\t\tfor (var i=0; i<json.layers[layerName].length; i++) {\n\t\t\t\t\tvar feat = json.layers[layerName].feature(i);\n\t\t\t\t\tfeat.geometry = feat.loadGeometry();\n\t\t\t\t\tfeats.push(feat);\n\t\t\t\t}\n\n\t\t\t\tjson.layers[layerName].features = feats;\n\t\t\t}\n\n\t\t\treturn json;\n\t\t});\n\t}\n});\n\n\nL.vectorGrid.protobuf = function (url, options) {\n\treturn new L.VectorGrid.Protobuf(url, options);\n};\n\n","\n\nL.Canvas.Tile = L.Canvas.extend({\n\n\tinitialize: function (tileCoord, tileSize, options) {\n\t\tL.Canvas.prototype.initialize.call(this, options);\n\t\tthis._tileCoord = tileCoord;\n\t\tthis._size = tileSize;\n\n\t\tthis._initContainer();\n\t\tthis._container.setAttribute('width', this._size.x);\n\t\tthis._container.setAttribute('height', this._size.y);\n\t\tthis._layers = {};\n\t\tthis._drawnLayers = {};\n\t\tthis._drawing = true;\n\n\t\tif (options.interactive) {\n\t\t\t// By default, Leaflet tiles do not have pointer events\n\t\t\tthis._container.style.pointerEvents = 'auto';\n\t\t}\n\t},\n\n\tgetCoord: function() {\n\t\treturn this._tileCoord;\n\t},\n\n\tgetContainer: function() {\n\t\treturn this._container;\n\t},\n\n\tgetOffset: function() {\n\t\treturn this._tileCoord.scaleBy(this._size).subtract(this._map.getPixelOrigin());\n\t},\n\n\tonAdd: L.Util.falseFn,\n\n\taddTo: function(map) {\n\t\tthis._map = map;\n\t},\n\n\t_onClick: function (e) {\n\t\tvar point = this._map.mouseEventToLayerPoint(e).subtract(this.getOffset()), layers = [], layer;\n\n\t\tfor (var id in this._layers) {\n\t\t\tlayer = this._layers[id];\n\t\t\tif (layer.options.interactive && layer._containsPoint(point) && !this._map._draggableMoved(layer)) {\n\t\t\t\tL.DomEvent._fakeStop(e);\n\t\t\t\tlayers.push(layer);\n\t\t\t}\n\t\t}\n\t\tif (layers.length)  {\n\t\t\tthis._fireEvent(layers, e);\n\t\t}\n\t},\n\n\t_onMouseMove: function (e) {\n\t\tif (!this._map || this._map.dragging.moving() || this._map._animatingZoom) { return; }\n\n\t\tvar point = this._map.mouseEventToLayerPoint(e).subtract(this.getOffset());\n\t\tthis._handleMouseOut(e, point);\n\t\tthis._handleMouseHover(e, point);\n\t},\n\n\t/// TODO: Modify _initPath to include an extra parameter, a group name\n\t/// to order symbolizers by z-index\n\n\t_updateIcon: function (layer) {\n\t\tif (!this._drawing) { return; }\n\n\t\tvar icon = layer.options.icon,\n\t\t    options = icon.options,\n\t\t    size = L.point(options.iconSize),\n\t\t    anchor = options.iconAnchor ||\n\t\t        \t size && size.divideBy(2, true),\n\t\t    p = layer._point.subtract(anchor),\n\t\t    ctx = this._ctx,\n\t\t    img = layer._getImage();\n\n\t\tif (img.complete) {\n\t\t\tctx.drawImage(img, p.x, p.y, size.x, size.y);\n\t\t} else {\n\t\t\tL.DomEvent.on(img, 'load', function() {\n\t\t\t\tctx.drawImage(img, p.x, p.y, size.x, size.y);\n\t\t\t});\n\t\t}\n\n\t\tthis._drawnLayers[layer._leaflet_id] = layer;\n\t}\n});\n\n\nL.canvas.tile = function(tileCoord, tileSize, opts){\n\treturn new L.Canvas.Tile(tileCoord, tileSize, opts);\n}\n\n","/*\n * Copyright 2017, Joachim Kuebart <joachim.kuebart@gmail.com>\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n *   1. Redistributions of source code must retain the above copyright\n *\tnotice, this list of conditions and the following disclaimer.\n *\n *   2. Redistributions in binary form must reproduce the above copyright\n *\tnotice, this list of conditions and the following disclaimer in the\n *\tdocumentation and/or other materials provided with the\n *\tdistribution.\n *\n *   3. Neither the name of the copyright holder nor the names of its\n *\tcontributors may be used to endorse or promote products derived\n *\tfrom this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n */\n\n// Missing monadic operation\nif ('function' !== typeof Array.prototype.flatMap) {\n    Object.defineProperty(Array.prototype, 'flatMap', {\n\t'value': function () {\n\t    'use strict';\n\n\t    // return [].concat(f(this[0]), f(this[1]), ...)\n\t    return Array.prototype.concat.apply([],\n\t\tArray.prototype.map.apply(this, arguments)\n\t    );\n\t},\n    });\n}\n"],"names":["Pbf","buf","this","ArrayBuffer","isView","Uint8Array","pos","type","length","readVarintRemainder","l","s","p","h","b","toNum","Error","readPackedEnd","pbf","Bytes","readVarint","low","high","isSigned","writeBigVarint","val","realloc","writeBigVarintLow","writeBigVarintHigh","lsb","makeRoomForExtraLength","startPos","len","extraLen","Math","ceil","log","LN2","i","writePackedVarint","arr","writeVarint","writePackedSVarint","writeSVarint","writePackedFloat","writeFloat","writePackedDouble","writeDouble","writePackedBoolean","writeBoolean","writePackedFixed32","writeFixed32","writePackedSFixed32","writeSFixed32","writePackedFixed64","writeFixed64","writePackedSFixed64","writeSFixed64","readUInt32","writeInt32","readInt32","readUtf8","end","str","b0","c","bytesPerSequence","b1","b2","b3","String","fromCharCode","writeUtf8","lead","charCodeAt","Point","x","y","VectorTileFeature","extent","keys","values","properties","_pbf","_geometry","_keys","_values","readFields","readFeature","tag","feature","id","readTag","key","value","classifyRings","rings","polygon","ccw","polygons","area","signedArea","undefined","push","ring","p1","p2","sum","j","VectorTileLayer","version","name","_features","readLayer","layer","readString","readValueMessage","readFloat","readDouble","readVarint64","readSVarint","readBoolean","VectorTile","layers","readTile","zip","const","args","Array","prototype","slice","call","arguments","Object","map","a","summary","summaryImp","m_walks","m_distance","self","walks","distance","toString","toFixed","join","accumulate","dist","summaryPane","onChange","handleVisible","year","visible","m_visibleYears","m_summary","flatMap","walk","dates","distances","reduce","dateDistance","substr","addLayer","on","bind","removeLayer","off","render","frag","document","createDocumentFragment","div","createElement","textContent","appendChild","search","array","pred","let","le","ri","mi","yearColour","idx","walkPopup","date","d","console","popup","elem0","title","categories","anchor","setAttribute","link","people","sort","getFeatureId","gpxmap","options","renderSummary","h3","L","DomUtil","create","empty","domDetails","trackStyle","hover","selected","props","hiddenYear","className","CSS","TRACK","color","opacity","weight","tileLayers","tileLayer","url","layersControl","control","hideSingleBase","forEach","addBaseLayer","domContainer","get","addClass","VBOX","VIEW","addControl","scale","DETAILS","walkLayer","vectorGrid","protobuf","pane","maxNativeZoom","vectorTileLayerStyles","addTo","mouseLayer","interactive","evt","setFeatureStyle","resetFeatureStyle","require","deselect","sumPane","years","DomEvent","stopPropagation","lg","layerGroup","redraw","addOverlay","bounds","latLngBounds","bboxes","bbox","GeoJSON","coordsToLatLngs","setMaxBounds","pad","fitBounds","SVG","Tile","extend","initialize","tileCoord","tileSize","_tileCoord","_size","_initContainer","_container","style","pointerEvents","_layers","getCoord","getContainer","onAdd","Util","falseFn","_map","_targets","stamp","_path","_addPath","_rootGroup","_updateIcon","path","icon","size","point","iconSize","iconAnchor","divideBy","_point","subtract","iconUrl","svg","tile","opts","VectorGrid","GridLayer","rendererFactory","setOptions","apply","_vectorTiles","_overriddenStyles","e","_tileCoordsToKey","coords","createTile","done","storeFeatures","getTileSize","renderer","vectorTilePromise","_getVectorTilePromise","then","vectorTile","layerName","pxPerExtent","layerStyle","Path","features","feat","styleOptions","styleOverride","Function","z","featureLayer","_createLayer","makeInteractive","requestAnimFrame","tileKey","data","_updateStyles","updateStyle","PointLayer","PolylineLayer","PolygonLayer","addEventParent","FeatureLayer","Class","_renderer","_initPath","_updateStyle","_getPixelBounds","parts","_parts","part","w","_clickTolerance","min","_subtract","max","_add","CircleMarker","includes","statics","iconCache","_makeFeatureParts","_radius","radius","_updatePath","coord","geometry","_empty","_updateBounds","_pxBounds","Bounds","add","_getImage","img","createIcon","_containsPoint","contains","polyBase","Polyline","fill","Polygon","buffer","offset","isLE","mLen","nBytes","m","eLen","eMax","eBias","nBits","NaN","Infinity","pow","rt","abs","isNaN","floor","ieee754","require$$0","Varint","Fixed64","Fixed32","SHIFT_LEFT_32","SHIFT_RIGHT_32","destroy","readField","result","skip","readMessage","readFixed32","readSFixed32","readFixed64","readSFixed64","read","num","Boolean","readBytes","subarray","readPackedVarint","readPackedSVarint","readPackedBoolean","readPackedFloat","readPackedDouble","readPackedFixed32","readPackedSFixed32","readPackedFixed64","readPackedSFixed64","writeTag","set","finish","writeString","write","writeBytes","writeRawMessage","fn","obj","writeMessage","writeBytesField","writeFixed32Field","writeSFixed32Field","writeFixed64Field","writeSFixed64Field","writeVarintField","writeSVarintField","writeStringField","writeFloatField","writeDoubleField","writeBooleanField","clone","sub","_sub","mult","k","_mult","_div","rotate","_rotate","matMult","_matMult","unit","_unit","perp","_perp","round","_round","mag","sqrt","equals","distSqr","dx","dy","angle","atan2","angleTo","angleWith","angleWithSep","cos","sin","convert","isArray","types","loadGeometry","line","cmd","lines","cmdLen","x1","x2","y1","y2","toGeoJSON","project","y0","x0","PI","atan","exp","points","coordinates","Protobuf","minZoom","maxZoom","minNativeZoom","subdomains","zoomOffset","zoomReverse","_url","_getSubdomain","TileLayer","_getZoomForUrl","crs","infinite","invertedY","_globalTileRange","tms","tileUrl","template","fetch","response","ok","blob","reader","FileReader","Promise","resolve","addEventListener","readAsArrayBuffer","json","feats","Canvas","_drawnLayers","_drawing","getOffset","scaleBy","getPixelOrigin","_onClick","mouseEventToLayerPoint","_draggableMoved","_fakeStop","_fireEvent","_onMouseMove","dragging","moving","_animatingZoom","_handleMouseOut","_handleMouseHover","ctx","_ctx","complete","drawImage","_leaflet_id","canvas","defineProperty","concat","HBOX","SELECT"],"mappings":"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"}